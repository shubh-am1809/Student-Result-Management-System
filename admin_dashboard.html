{% extends "base.html" %}

{% block content %}
<h2>Admin Dashboard</h2>

<div class="row mt-3">
  <div class="col-md-3">
    <div class="card text-center">
      <div class="card-body">
        <h5>Total Students</h5>
        <h3>{{ total_students }}</h3>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card text-center">
      <div class="card-body">
        <h5>Total Results</h5>
        <h3>{{ total_results }}</h3>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card text-center">
      <div class="card-body">
        <h5>Average Percentage</h5>
        <h3>{{ avg_percentage }}%</h3>
      </div>
    </div>
  </div>

  <div class="col-md-3">
    <div class="card text-center">
      <div class="card-body">
        <h5>Subjects Count</h5>
        <h3>{{ subjects_count }}</h3>
      </div>
    </div>
  </div>
</div>

<h4 class="mt-4">Recent Results</h4>
<table class="table table-striped mt-2">
  <thead>
    <tr>
      <th>#</th>
      <th>Roll No</th>
      <th>Name</th>
      <th>Class</th>
      <th>Subject</th>
      <th>Marks / Max</th>
    </tr>
  </thead>
  <tbody>
    {% for r in recent_results %}
    <tr>
      <td>{{ r['id'] }}</td>
      <td>{{ r['roll_no'] }}</td>
      <td>{{ r['name'] }}</td>
      <td>{{ r['class_name'] }}</td>
      <td>{{ r['subject'] }}</td>
      <td>{{ r['marks'] }} / {{ r['max_marks'] }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
