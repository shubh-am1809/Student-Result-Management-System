{% extends "base.html" %}

{% block content %}
<h2>My Result</h2>

<h4 class="mt-3">{{ student['name'] }} (Roll: {{ student['roll_no'] }})</h4>
<p>Class: {{ student['class_name'] }}</p>
<p>DOB: {{ student['dob'] }}</p>

{% if results %}
  <div class="d-flex justify-content-between align-items-center mt-3">
    <h5>Subjects & Marks</h5>
    <a href="{{ url_for('export_result_pdf', roll_no=student['roll_no']) }}"
       class="btn btn-outline-secondary btn-sm">
      Download PDF
    </a>
  </div>

  <table class="table table-bordered mt-3">
    <thead>
      <tr>
        <th>Subject</th>
        <th>Marks</th>
      </tr>
    </thead>
    <tbody>
      {% for row in results %}
      <tr>
        <td>{{ row['subject'] }}</td>
        <td>{{ row['marks'] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p><strong>Total:</strong> {{ total }}</p>
  <p><strong>Percentage:</strong> {{ percentage }}%</p>
{% else %}
  <p class="mt-3">No results uploaded yet.</p>
{% endif %}

{% endblock %}
